#summary About API users and keys

= KeyManagement =
The following backends are available:
  * *file backend*: data is stored as files on the filesystem.
  * *dummy backend*: data is stored within tcl. This module is for debugging only.

== File backend ==
=== Users ===
Each external application as associated with one or more API users.

API Users are referenced by a user ID, AES-API-Key and the validation server's URL. This information is stored on the application side - e.g. `example.com/blog` - either for an entire site, or for each application user separately.

The configuration resides under `data/users/X`, where X is the user ID.

Fields:
|| apikey || mandatory || hex-encoded API key (32 xdigits) ||
|| service_description || optional || descriptive reference to the associated service (string) ||
|| force_hmac || optional || API calls must be signed (0|1; defaults to 0) ||

* Comments are prefixed by _#_.
* 
Example `data/users/1`:
{{{
# example configuration
apikey = da5d1a9407db6df1b547c0daefb6298a
service_description = fnord secure email provider
force_hmac = 1
}}}


=== Keys ===
Keys reside under `data/keys/Y`, where Y is the modhex-encoded public identity.

Fields:
|| aeskey || mandatory || hex-encoded AES key (32 xdigits) ||
|| uid || mandatory || hex-encoded private identity (12 xdigits) ||
|| publicid || mandatory || hex-encoded public identity (0-16 xdigits, 12 digits for compatibility) ||
|| active || optional || key can be used? (0|1; defaults to 1) ||
|| serialnr || optional || reference to the key's serial nr (string) ||
|| usertoken || optional || reference to the keyholder, e.g. email address ||

Example `data/keys/djiehevlhiti`:
{{{
## created/modified: 2011-02-11 02:30:19 UTC
aeskey = a75bab9004c818850b0b549e32c4491c
uid = 679fc91ff65d
active = 1
usertoken = foo@example.com
serialnr = 510459
publicid = 287363fa67d7
}}}


=== Programming Keys ===
Example with [http://code.google.com/p/yubikey-personalization/ ykpers]:
{{{
ykpersonalize -1 -aa75bab9004c818850b0b549e32c4491c -osend-ref -ofixed=h:626566 -ouid=000000000bef
}}}
